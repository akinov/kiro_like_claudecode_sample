<% content_for(:title, "#{@post_data.title} - 掲示板") %>

<div class="max-w-4xl mx-auto">
  <!-- 投稿詳細 -->
  <div class="post-card mb-6">
    <div class="flex justify-between items-start mb-4">
      <h1 class="text-2xl font-bold text-gray-800"><%= @post_data.title %></h1>
      <span class="text-sm text-gray-500"><%= @post_data.formatted_created_at %></span>
    </div>
    
    <div class="prose max-w-none mb-4">
      <p class="text-gray-700 leading-relaxed whitespace-pre-wrap"><%= @post_data.content %></p>
    </div>
    
    <div class="text-sm text-gray-500">
      投稿者: <%= @post_data.author_name %>
    </div>
  </div>

  <!-- 返信セクション -->
  <div class="reply-section">
    <h3 class="text-lg font-semibold text-gray-800 mb-4">
      返信 (<%= @post_data.reply_count %>件)
    </h3>
    
    <div id="replies_list" class="space-y-4 mb-6">
      <% @post_data.replies.each do |reply| %>
        <%= render "replies/reply_item", reply: reply %>
      <% end %>
      
      <% if @post_data.replies.empty? %>
        <p class="text-gray-500">まだ返信がありません</p>
      <% end %>
    </div>

    <!-- 返信フォーム -->
    <div id="reply_form">
      <%= render "replies/form", post_id: @post_data.id, form: @new_reply_form %>
    </div>
  </div>

  <!-- 戻るボタン -->
  <div class="mt-6">
    <%= link_to "← 投稿一覧に戻る", root_path, class: "btn-secondary" %>
  </div>
</div>